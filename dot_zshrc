# Apply colours from pywal
cat ~/.cache/wal/sequences


# === zinit === #
source ~/zsh-scripts/init_zinit.sh

# Load keybindings
zinit snippet ~/zsh-scripts/keybindings.sh

# Load prompt
zinit ice wait'!' lucid nocd \
    atload'!_agkozak_precmd'
zinit load "agkozak/agkozak-zsh-prompt"

zinit load "MikeDacre/careful_rm"

# Load asynchronously
zinit wait lucid for \
  "MikeDacre/cdbk" \
  "MichaelAquilina/zsh-you-should-use" \
  "zsh-users/zsh-autosuggestions" \
  atinit'zpcompinit' "zdharma/fast-syntax-highlighting"

# Make careful_rm -c default for $HOME
[ ! -f "$HOME/.rm_recycle_home" ] && touch "$HOME/.rm_recycle_home"

# Make less more friendly for non-text input files, see lesspipe(1)
[ -x /usr/bin/lesspipe ] && eval "$(SHELL=/bin/sh lesspipe)"


# === Activate scripts === #
scripts=(

  # Adds function for checking if given command is available. Required by debian-arch-bridge.sh
  ~/scripts/cmd_available.sh

  # Adds apt ↔ yay bridge [WIP]
  ~/scripts/debian-arch-bridge.sh

  # Private things. Don't upload!
  ~/scripts/private.sh

  # Open file in background without output using xdg-open
  ~/scripts/x.sh

  # Apply fzf shortcuts e.g. M-c — go to file
  ~/.fzf.zsh

  # Load aliases (file is compatible with both bash and zsh)
  ~/.aliases

  # Load the calc plugin
  ~/zsh-scripts/calc.sh

  # Load the zmv command
  ~/zsh-scripts/zmv.sh

)
for script in ${scripts[@]}; do

  # -s: True if file exists and has a size greater than zero.
  # Source: https://www.gnu.org/software/bash/manual/html_node/Bash-Conditional-Expressions.html
  # if [ -s "$script" ]; then
    source "$script"
  # fi

done

# Fuck it
eval "$(thefuck --alias)"

# Init completions
zpcompinit
zinit cdreplay -q

# If I make another tool than needs to be at the end, then what?
if [ ! -d "/home/nawordar/.sdkman" ]; then
  return 0
fi

#THIS MUST BE AT THE END OF THE FILE FOR SDKMAN TO WORK!!!
export SDKMAN_DIR="/home/nawordar/.sdkman"
[[ -s "/home/nawordar/.sdkman/bin/sdkman-init.sh" ]] && source "/home/nawordar/.sdkman/bin/sdkman-init.sh"
